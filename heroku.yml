# https://devcenter.heroku.com/ja/articles/build-docker-images-heroku-yml#heroku-yml
# https://devcenter.heroku.com/ja/categories/ruby-support
# https://github.com/naohito-T/Neams-api/blob/develop/heroku.yml
# setup:
#   addons:
#     # https://bagelee.com/programming/docker-rails-deploy-heroku/
#     -plan: jawsdb
build:
  # https://zenn.dev/daijiro/articles/deploying-with-docker-on-heroku#heroku-%E4%B8%8A%E3%81%AB%E8%A8%AD%E5%AE%9A%E3%81%97%E3%81%9F%E7%92%B0%E5%A2%83%E5%A4%89%E6%95%B0%E3%81%AE%E5%8F%82%E7%85%A7%E6%96%B9%E6%B3%95
  # config:
  #   RACK_ENV: production
  #   RAILS_ENV: production
  #   RAILS_LOG_TO_STDOUT: enabled
  #   RAILS_SERVE_STATIC_FILES: enabled
  #   # RAILS_MASTER_KEY:
  #   # SECRET_KEY_BASE:
  #   WORKDIR: /webapp
  docker:
    web: Dockerfile.production
release:
  command:
    - mv confing/environments/production.heroku.rb confing/environments/production.rb
    - mv config/database.heroku.yml config/database.yml
    - mv config/puma.heroku.rb config/puma.rb
    # - bundle exec rake db:migrate
run:
  web: bundle exec puma -C config/puma.rb
